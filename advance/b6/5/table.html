<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Table</title>
    </head>
    <body>
        <div class="container">
            <table class="student-table">
                <thead>
                    <th class="id">ID</th>
                    <th>Name</th>
                    <th class="age">Age</th>
                    <th>Email</th>
                </thead>
                <tbody class="student-list"></tbody>
            </table>
        </div>

        <script>
            let students = [
                {
                    id: 1,
                    name: "Ba Nguyễn",
                    age: 29,
                    email: "ba@techmaster.vn",
                },
                {
                    id: 2,
                    name: "Nam Trương",
                    age: 21,
                    email: "truongcongnam1207@gmail.com",
                },
                {
                    id: 3,
                    name: "Nghĩa Đặng",
                    age: 30,
                    email: "dtnghia20191@yahoo.com",
                },
                {
                    id: 4,
                    name: "Minh",
                    age: 23,
                    email: "minh@gmail.com",
                },
                {
                    id: 5,
                    name: "Vu Anh",
                    age: 20,
                    email: "jj@email.com",
                },
                {
                    id: 6,
                    name: "Le Linh",
                    age: 23,
                    email: "linhdr141020@gmail.com",
                },
            ];

            let studentTable = document.querySelector(".student-table");
            let studentList = document.querySelector(".student-list");
            let age = studentTable.tHead.querySelector(".age");
            let id = studentTable.tHead.querySelector(".id");

            function createStudentElement(student) {
                let tr = document.createElement("tr");

                let id = document.createElement("td");
                id.textContent = student.id;

                let name = document.createElement("td");
                name.textContent = student.name;

                let age = document.createElement("td");
                age.textContent = student.age;

                let email = document.createElement("td");
                email.textContent = student.email;

                tr.append(id, name, age, email);
                tr.data = student;

                return tr;
            }

            function render() {
                students.forEach(function (el) {
                    studentList.append(el);
                });
            }

            students = students.map(createStudentElement);
            render();

            let asc = true;
            
            age.addEventListener("click", function (ev) {
                students.sort(function (a, b) {
                    if (asc) {
                        return a.data.age - b.data.age;
                    } else {
                        return b.data.age - a.data.age;
                    }
                });

                asc = !asc;

                render();
            });

            id.addEventListener("click", function (ev) {
                students.sort(function (a, b) {
                    if (asc) {
                        return a.data.id - b.data.id;
                    } else {
                        return b.data.id - a.data.id;
                    }
                });

                asc = !asc;

                render();
            });
        </script>
    </body>
</html>
